(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{0:function(e,t,r){"use strict";function a(e){return e||""}function l(e){return e||!1}function o(e){for(var t in e)""===e[t]&&delete e[t];return e}function i(e){for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),r=1;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)+e.charCodeAt(r-1));return escape(t)}function s(e){e=unescape(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),r=1;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)-t.charCodeAt(r-1));return t}function n(e){if(!t)var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function u(e){if(!t)var t=new Date(e);return t.getFullYear()+""+(t.getMonth()+1)}function m(e){var t=this,r=!1;if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e.headers["content-type"]&&"application/vnd.ms-excel"!=e.headers["content-type"]||(r=!0),r){var a=new Blob([e.data],{type:"application/vnd.ms-excel"}),l=e.headers["content-disposition"].split(";")[1].split("=")[1];if("download"in document.createElement("a")){var o=document.createElement("a");o.style.display="none",o.href=window.URL.createObjectURL(a),o.download=decodeURIComponent(l),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(a,l)}else{var i=new FileReader;i.onload=function(e){return t.$message.error(JSON.parse(e.target.result).msg)},i.readAsText(e.data)}}function d(e,t,r){var a;return function(){for(var l=arguments.length,o=new Array(l),i=0;i<l;i++)o[i]=arguments[i];var s=this;if(a&&clearTimeout(a),r){var n=!a;a=setTimeout((function(){a=null}),t),n&&e.apply(s,o)}else a=setTimeout((function(){e.apply(s,o)}),t)}}r.d(t,"f",(function(){return a})),r.d(t,"d",(function(){return l})),r.d(t,"h",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"i",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return m})),r.d(t,"g",(function(){return d})),r(27)},137:function(e,t,r){"use strict";r(57)},138:function(e,t,r){(t=r(3)(!1)).push([e.i,".shStockUser_page[data-v-16e0e63d]{padding:0 20px}.topmenu[data-v-16e0e63d]{display:flex;justify-content:space-between;align-items:center;height:60px;padding:0 20px;margin:20px 0px 0px;border:1px solid #efefef}.topmenu .title[data-v-16e0e63d]{color:#95b3ce;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.topmenu .topmenu_r[data-v-16e0e63d]{margin-right:12px;cursor:pointer}.topmenu span.title[data-v-16e0e63d]{margin-left:16px}.formbox[data-v-16e0e63d]{border:1px solid #efefef;padding:20px 0}.formbox .demo-ruleForm .line[data-v-16e0e63d]{display:flex;justify-content:flex-start;align-items:center}.formbox .demo-ruleForm .orderinput[data-v-16e0e63d]{width:130px}.formbox .demo-ruleForm label[data-v-16e0e63d]{font-size:12px}.formbox .demo-ruleForm .timearea[data-v-16e0e63d]{margin-left:28px}.formbox .demo-ruleForm .orderlowinput[data-v-16e0e63d],.formbox .demo-ruleForm .orderhighinput[data-v-16e0e63d]{display:inline-block;position:relative}.formbox .demo-ruleForm .orderlowinput .tip[data-v-16e0e63d],.formbox .demo-ruleForm .orderhighinput .tip[data-v-16e0e63d]{color:#F56C6C;font-size:12px;line-height:1;padding-top:4px;position:absolute;top:100%;left:0}.formbox .demo-ruleForm .btn[data-v-16e0e63d]{padding-left:28px}.table[data-v-16e0e63d]{overflow-x:auto}.table[data-v-16e0e63d] ::-webkit-scrollbar{width:5px;height:5px}.table .btn[data-v-16e0e63d]{display:inline-block;margin-left:20px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.table .auth.btn[data-v-16e0e63d]{margin-left:0}.Pagination[data-v-16e0e63d]{display:flex;justify-content:space-between;margin-top:8px}\n",""]),e.exports=t},15:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i}));var a=r(2);function l(e){return Object(a.a)({url:"/api/level2/report/query/users",method:"post",data:e})}function o(e){return Object(a.a)({url:"/api/level2/report/query",method:"post",data:e})}function i(e){return Object(a.a)({url:"/api/level2/report/export",method:"get",responseType:"blob",params:e})}},207:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shStockUser_page fillcontain"},[r("div",{staticClass:"topmenu"},[e._m(0),e._v(" "),r("div",{staticClass:"topmenu_r",on:{click:e.exportReport}},[r("i",{staticClass:"el-icon-download title"}),e._v(" "),r("span",{staticClass:"title"},[e._v("导出报表")])])]),e._v(" "),r("div",{staticClass:"formbox"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-position":e.labelPosition,rules:e.rules,"label-width":"auto"}},[r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入手机号"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户状态",prop:"userStatus"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.userStatus,callback:function(t){e.$set(e.ruleForm,"userStatus",t)},expression:"ruleForm.userStatus"}},e._l(e.userStatusOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"timearea",attrs:{label:"剩余时间区间"}},[r("div",{staticClass:"orderlowinput"},[r("el-input",{staticClass:"orderinput",attrs:{placeholder:"输入最小值",clearable:""},on:{blur:function(t){return e.validateLow()}},model:{value:e.ruleForm.minTime,callback:function(t){e.$set(e.ruleForm,"minTime",t)},expression:"ruleForm.minTime"}}),e._v(" "),r("i",{staticClass:"tip"},[e._v(e._s(e.ruleForm.minTimetip))])],1),e._v(" "),r("span",[e._v("至")]),e._v(" "),r("div",{staticClass:"orderhighinput"},[r("el-input",{staticClass:"orderinput",attrs:{placeholder:"输入最大值",clearable:""},on:{blur:function(t){return e.validateHigh()}},model:{value:e.ruleForm.maxTime,callback:function(t){e.$set(e.ruleForm,"maxTime",t)},expression:"ruleForm.maxTime"}}),e._v(" "),r("i",{staticClass:"tip"},[e._v(e._s(e.ruleForm.maxTimetip))])],1)])],1),e._v(" "),r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[r("el-date-picker",{staticClass:"timeline",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.startTime,callback:function(t){e.$set(e.ruleForm,"startTime",t)},expression:"ruleForm.startTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[r("el-date-picker",{staticClass:"timeline",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1)],1),e._v(" "),r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"排序方式"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.userId,callback:function(t){e.$set(e.ruleForm,"userId",t)},expression:"ruleForm.userId"}},e._l(e.userIdOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.sortStyle,callback:function(t){e.$set(e.ruleForm,"sortStyle",t)},expression:"ruleForm.sortStyle"}},e._l(e.sortStyleOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"时间",prop:"time"}},[r("el-date-picker",{attrs:{type:"month",placeholder:"选择时间",format:"yyyy-MM","value-format":"yyyyMM"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1),e._v(" "),r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"优惠标记",prop:"saleTag"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.saleTag,callback:function(t){e.$set(e.ruleForm,"saleTag",t)},expression:"ruleForm.saleTag"}},e._l(e.saleTagOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用户类型",prop:"userStyle"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.userStyle,callback:function(t){e.$set(e.ruleForm,"userStyle",t)},expression:"ruleForm.userStyle"}},e._l(e.userStyleOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),r("div",{staticClass:"btn"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("查询")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)])],1),e._v(" "),r("div",{staticClass:"table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"phone",label:"用户id(手机号)","min-width":"160"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userStatus",label:"用户状态","min-width":"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodsAuth",label:"产品权限","min-width":"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"startTime",label:"起始时间","min-width":"140"}}),e._v(" "),r("el-table-column",{attrs:{prop:"endTime",label:"终止时间","min-width":"140"}}),e._v(" "),r("el-table-column",{attrs:{prop:"saleTag",label:"优惠标记"}})],1)],1),e._v(" "),r("div",{staticClass:"Pagination"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[3,5,10,20],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])};a._withStripped=!0;var l=r(15),o=r(0),i={data:function(){return{msg:"4",adminInfo:"",loading:!0,labelPosition:"left",currentPage:1,offset:1,limit:10,pagesize:1,count:10,ruleForm:{startTime:"",endTime:"",minTime:"",minTimetip:"",maxTime:"",maxTimetip:"",phone:"",userId:"",userStatus:"0",sortStyle:"",time:Object(o.c)(new Date),saleTag:"",userStyle:"0"},rules:{phone:[{pattern:/^[0-9]{11}$/,message:"请填写正确的手机号",trigger:"blur"}]},userIdOptions:[{value:"0",label:"手机号"},{value:"1",label:"剩余期限"},{value:"2",label:"起始时间"},{value:"3",label:"终止时间"}],saleTagOptions:[{value:"",label:"全部"},{value:"1",label:"全价用户"},{value:"2",label:"监管用户"},{value:"3",label:"内部免费用户"},{value:"4",label:"试用用户"}],userStyleOptions:[{value:"0",label:"全部"},{value:"1",label:"新开通用户"},{value:"2",label:"注销用户"}],sortStyleOptions:[{value:"ASC",label:"升序"},{value:"DESC",label:"降序"}],userStatusOptions:[{value:"0",label:"全部"},{value:"1",label:"正常使用"},{value:"2",label:"权限到期"}],tableData:[]}},methods:{init:function(){var e=this.setParams();this.queryUserReport(e)},setParams:function(){var e={limit:this.limit,offset:this.offset,phoneNumber:this.ruleForm.phone,beginTime:"",endTime:"",endBeginTime:"",endEndTime:"",maxDays:this.ruleForm.maxTime,minDays:this.ruleForm.minTime,time:"",bootstrapOrder:this.ruleForm.sortStyle,bootstrapSort:this.ruleForm.userId,discountTag:this.ruleForm.saleTag,userStatus:this.ruleForm.userStatus,userType:this.ruleForm.userStyle};return this.ruleForm.startTime&&(e.beginTime=Object(o.a)(this.ruleForm.startTime[0]),e.endTime=Object(o.a)(this.ruleForm.startTime[1])),this.ruleForm.endTime&&(e.endBeginTime=Object(o.a)(this.ruleForm.endTime[0]),e.endEndTime=Object(o.a)(this.ruleForm.endTime[1])),this.ruleForm.time&&(e.time=this.ruleForm.time),e},queryUserReport:function(e){var t=this;Object(l.c)(Object(o.h)(e)).then((function(e){e.data.flag?(t.loading=!1,t.tableData=[],e.data.data.rows.forEach((function(e,r){var a={phone:e.phoneNumber,userStatus:e.days>0?"正常使用":"权限到期",goodsAuth:e.days,startTime:e.level2StartTime,endTime:e.level2EndTime,saleTag:e.discountTag};switch(a.saleTag){case 1:a.saleTag="全价用户";break;case 2:a.saleTag="监管用户";break;case 3:a.saleTag="内部免费用户";break;case 4:a.saleTag="试用用户"}t.tableData.push(a)})),t.count=e.data.data.total):(t.loading=!1,t.$message({message:e.data.msg?e.data.msg:"查询报表失败",type:"error"}))})).catch((function(e){t.loading=!1,t.$message({message:e,type:"error"})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.queryUserReport(t.setParams())}))},exportReport:function(){this.$message({message:"暂无该功能",type:"warning"})},resetForm:function(e){this.$refs[e].resetFields(),this.ruleForm.startTime="",this.ruleForm.endTime="",this.ruleForm.minTime="",this.ruleForm.minTimetip="",this.ruleForm.maxTime="",this.ruleForm.maxTimetip="",this.ruleForm.userId="",this.ruleForm.sortStyle=""},handleSizeChange:function(e){this.loading=!0,this.limit=e;var t=this.setParams();this.queryUserReport(t)},handleCurrentChange:function(e){this.loading=!0,this.currentPage=e,this.offset=e;var t=this.setParams();this.queryUserReport(t)},validateLow:function(){isNaN(this.ruleForm.minTime)?this.ruleForm.minTimetip="请输入数字":this.ruleForm.maxTime&&Number(this.ruleForm.minTime)>Number(this.ruleForm.maxTime)?this.ruleForm.minTimetip="要低于最大值":this.ruleForm.minTimetip="",""==this.ruleForm.minTime&&(this.ruleForm.minTimetip="")},validateHigh:function(){isNaN(this.ruleForm.maxTime)?this.ruleForm.maxTimetip="请输入数字":this.ruleForm.minTime&&Number(this.ruleForm.maxTime)<Number(this.ruleForm.minTime)?this.ruleForm.maxTimetip="要高于最小值":this.ruleForm.maxTimetip="",""==this.ruleForm.maxTime&&(this.ruleForm.maxTimetip="")}},created:function(){this.init()}},s=(r(137),r(1)),n=Object(s.a)(i,a,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"topmenu_l"},[t("i",{staticClass:"el-icon-document title"}),this._v(" "),t("span",{staticClass:"title"},[this._v("用户管理")])])}],!1,null,"16e0e63d",null);n.options.__file="src/page/reportCenter/shStockUser.vue",t.default=n.exports},27:function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=r=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},57:function(e,t,r){var a=r(138);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,r(4).default)("70bf3197",a,!1,{})}}]);