(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{0:function(e,t,a){"use strict";function n(e){return e||""}function c(e){return e||!1}function o(e){for(var t in e)""===e[t]&&delete e[t];return e}function r(e){for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),a=1;a<e.length;a++)t+=String.fromCharCode(e.charCodeAt(a)+e.charCodeAt(a-1));return escape(t)}function s(e){e=unescape(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),a=1;a<e.length;a++)t+=String.fromCharCode(e.charCodeAt(a)-t.charCodeAt(a-1));return t}function i(e){if(!t)var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function d(e){if(!t)var t=new Date(e);return t.getFullYear()+""+(t.getMonth()+1)}function h(e){var t=this,a=!1;if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e.headers["content-type"]&&"application/vnd.ms-excel"!=e.headers["content-type"]||(a=!0),a){var n=new Blob([e.data],{type:"application/vnd.ms-excel"}),c=e.headers["content-disposition"].split(";")[1].split("=")[1];if("download"in document.createElement("a")){var o=document.createElement("a");o.style.display="none",o.href=window.URL.createObjectURL(n),o.download=decodeURIComponent(c),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,c)}else{var r=new FileReader;r.onload=function(e){return t.$message.error(JSON.parse(e.target.result).msg)},r.readAsText(e.data)}}function l(e,t,a){var n;return function(){for(var c=arguments.length,o=new Array(c),r=0;r<c;r++)o[r]=arguments[r];var s=this;if(n&&clearTimeout(n),a){var i=!n;n=setTimeout((function(){n=null}),t),i&&e.apply(s,o)}else n=setTimeout((function(){e.apply(s,o)}),t)}}a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"h",(function(){return o})),a.d(t,"e",(function(){return r})),a.d(t,"i",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"g",(function(){return l})),a(27)},105:function(e,t,a){"use strict";a(41)},106:function(e,t,a){(t=a(3)(!1)).push([e.i,".manageAuth_page[data-v-2ebd3025]{padding:0 20px}.topmenu[data-v-2ebd3025]{display:flex;justify-content:space-between;align-items:center;height:60px;padding:0 20px;margin:20px 0px 0px;border:1px solid #efefef}.topmenu .title[data-v-2ebd3025]{color:#95b3ce;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.topmenu span.title[data-v-2ebd3025]{margin-left:16px}table[data-v-2ebd3025]{border-collapse:collapse}table thead tr th[data-v-2ebd3025]{border:1px solid #efefef;font-size:14px;color:#909399;padding:8px 10px}table tbody tr td[data-v-2ebd3025]{border:1px solid #efefef;font-size:14px;padding:15px 10px;color:#606266}.btn[data-v-2ebd3025]{margin:20px 30px}.btn .save[data-v-2ebd3025]{margin-right:60px}\n",""]),e.exports=t},223:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manageAuth_page fillcontain"},[a("div",{staticClass:"topmenu"},[a("div",{staticClass:"topmenu_l"},[a("i",{staticClass:"el-icon-document title"}),e._v(" "),a("span",{staticClass:"title"},[e._v("角色："),a("i",[e._v(e._s(e.rolename))])])])]),e._v(" "),a("table",{attrs:{border:"0",cellspacing:"0",cellpadding:"0",width:"100%"}},[e._m(0),e._v(" "),a("tbody",[a("tr",[e._m(1),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.updatepwd,callback:function(t){e.updatepwd=t},expression:"updatepwd"}},[e._v("修改密码")])],1)]),e._v(" "),a("tr",[e._m(2),e._v(" "),a("td",e._l(e.roleManage,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name},on:{change:function(a){return e.handleChecked(t.style,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(e._s(t.label))])})),1)]),e._v(" "),a("tr",[e._m(3),e._v(" "),a("td",e._l(e.operatorManage,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name},on:{change:function(a){return e.handleChecked(t.style,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(e._s(t.label))])})),1)]),e._v(" "),a("tr",[e._m(4),e._v(" "),a("td",e._l(e.goodsManage,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name},on:{change:function(a){return e.handleChecked(t.style,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(e._s(t.label))])})),1)]),e._v(" "),a("tr",[e._m(5),e._v(" "),a("td",e._l(e.activityManage,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name},on:{change:function(a){return e.handleChecked(t.style,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(e._s(t.label))])})),1)]),e._v(" "),a("tr",[e._m(6),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.orderManage.view,callback:function(t){e.$set(e.orderManage,"view",t)},expression:"orderManage.view"}},[e._v("查看权限")])],1)]),e._v(" "),a("tr",[e._m(7),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.userFeedbackManage.view,callback:function(t){e.$set(e.userFeedbackManage,"view",t)},expression:"userFeedbackManage.view"}},[e._v("查看权限")])],1)]),e._v(" "),a("tr",[e._m(8),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.userManage.view,callback:function(t){e.$set(e.userManage,"view",t)},expression:"userManage.view"}},[e._v("查看权限")])],1)]),e._v(" "),a("tr",[e._m(9),e._v(" "),a("td",e._l(e.batchRecord,(function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name},on:{change:function(a){return e.handleChecked(t.style,t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(e._s(t.label))])})),1)]),e._v(" "),a("tr",[e._m(10),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.shStockExchange.viewUser,callback:function(t){e.$set(e.shStockExchange,"viewUser",t)},expression:"shStockExchange.viewUser"}},[e._v("用户列表的查看")]),e._v(" "),a("el-checkbox",{model:{value:e.shStockExchange.exportUser,callback:function(t){e.$set(e.shStockExchange,"exportUser",t)},expression:"shStockExchange.exportUser"}},[e._v("用户列表的导出")]),e._v(" "),a("el-checkbox",{model:{value:e.shStockExchange.viewMonthReport,callback:function(t){e.$set(e.shStockExchange,"viewMonthReport",t)},expression:"shStockExchange.viewMonthReport"}},[e._v("月报表的查看")]),e._v(" "),a("el-checkbox",{model:{value:e.shStockExchange.exportMonthReport,callback:function(t){e.$set(e.shStockExchange,"exportMonthReport",t)},expression:"shStockExchange.exportMonthReport"}},[e._v("月报表的导出")])],1)]),e._v(" "),a("tr",[e._m(11),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.szStockExchange.viewUser,callback:function(t){e.$set(e.szStockExchange,"viewUser",t)},expression:"szStockExchange.viewUser"}},[e._v("用户列表的查看")]),e._v(" "),a("el-checkbox",{model:{value:e.szStockExchange.exportUser,callback:function(t){e.$set(e.szStockExchange,"exportUser",t)},expression:"szStockExchange.exportUser"}},[e._v("用户列表的导出")]),e._v(" "),a("el-checkbox",{model:{value:e.szStockExchange.viewMonthReport,callback:function(t){e.$set(e.szStockExchange,"viewMonthReport",t)},expression:"szStockExchange.viewMonthReport"}},[e._v("月报表的查看")]),e._v(" "),a("el-checkbox",{model:{value:e.szStockExchange.exportMonthReport,callback:function(t){e.$set(e.szStockExchange,"exportMonthReport",t)},expression:"szStockExchange.exportMonthReport"}},[e._v("月报表的导出")])],1)]),e._v(" "),a("tr",[e._m(12),e._v(" "),a("td",[a("el-checkbox",{model:{value:e.appVersionManage.view,callback:function(t){e.$set(e.appVersionManage,"view",t)},expression:"appVersionManage.view"}},[e._v("查看权限")])],1)])])]),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("取消")])],1)])};n._withStripped=!0;var c=a(0),o=a(6),r={data:function(){return{msg:"角色列表",rolename:Object(c.i)(this.$route.query.name),updatepwd:!1,roleManage:[{style:"role",name:"view",label:"查看权限",checked:!1},{style:"role",name:"add",label:"添加权限",checked:!1},{style:"role",name:"update",label:"修改权限",checked:!1},{style:"role",name:"delete",label:"删除权限",checked:!1},{style:"role",name:"auth",label:"管理权限",checked:!1}],operatorManage:[{style:"operator",name:"view",label:"查看权限",checked:!1},{style:"operator",name:"add",label:"添加权限",checked:!1},{style:"operator",name:"update",label:"修改权限",checked:!1},{style:"operator",name:"delete",label:"删除权限",checked:!1},{style:"operator",name:"resetpwd",label:"密码重置",checked:!1}],goodsManage:[{style:"goods",name:"view",label:"查看权限",checked:!1},{style:"goods",name:"add",label:"添加权限",checked:!1},{style:"goods",name:"update",label:"修改权限",checked:!1},{style:"goods",name:"delete",label:"删除权限",checked:!1},{style:"goods",name:"saleOnOrOff",label:"上下架权限",checked:!1}],activityManage:[{style:"activity",name:"view",label:"查看权限",checked:!1},{style:"activity",name:"add",label:"添加权限",checked:!1},{style:"activity",name:"update",label:"修改权限",checked:!1},{style:"activity",name:"delete",label:"删除权限",checked:!1},{style:"activity",name:"saleOnOrOff",label:"上下架权限",checked:!1}],orderManage:{view:!1},userFeedbackManage:{view:!1},userManage:{view:!1},batchRecord:[{style:"batch",name:"view",label:"查看权限",checked:!1},{style:"batch",name:"batchOpen",label:"批量开通",checked:!1}],shStockExchange:{exportMonthReport:!1,exportUser:!1,viewMonthReport:!1,viewUser:!1},szStockExchange:{exportMonthReport:!1,exportUser:!1,viewMonthReport:!1,viewUser:!1},appVersionManage:{view:!1},isIndeterminate:!0}},methods:{initdata:function(){var e=this,t={id:this.$route.query.id};Object(o.i)(t).then((function(t){if(t.data.data){var a=t.data.data;e.updatepwd=Object(c.d)(a.personalManage.modifyPassword),e.roleManage[0].checked=Object(c.d)(a.roleManage.view),e.roleManage[1].checked=Object(c.d)(a.roleManage.add),e.roleManage[2].checked=Object(c.d)(a.roleManage.edit),e.roleManage[3].checked=Object(c.d)(a.roleManage.delete),e.roleManage[4].checked=Object(c.d)(a.roleManage.managePermission),e.operatorManage[0].checked=Object(c.d)(a.operatorManage.view),e.operatorManage[1].checked=Object(c.d)(a.operatorManage.add),e.operatorManage[2].checked=Object(c.d)(a.operatorManage.edit),e.operatorManage[3].checked=Object(c.d)(a.operatorManage.delete),e.operatorManage[4].checked=Object(c.d)(a.operatorManage.resetPassword),e.goodsManage[0].checked=Object(c.d)(a.goodsManage.view),e.goodsManage[1].checked=Object(c.d)(a.goodsManage.add),e.goodsManage[2].checked=Object(c.d)(a.goodsManage.edit),e.goodsManage[3].checked=Object(c.d)(a.goodsManage.delete),e.goodsManage[4].checked=Object(c.d)(a.goodsManage.saleOnOrOff),e.activityManage[0].checked=Object(c.d)(a.activityManage.view),e.activityManage[1].checked=Object(c.d)(a.activityManage.add),e.activityManage[2].checked=Object(c.d)(a.activityManage.edit),e.activityManage[3].checked=Object(c.d)(a.activityManage.delete),e.activityManage[4].checked=Object(c.d)(a.activityManage.saleOnOrOff),e.orderManage.view=Object(c.d)(a.orderManage.view),e.userFeedbackManage.view=Object(c.d)(a.userFeedbackManage.view),e.userManage.view=Object(c.d)(a.userManage.view),e.batchRecord[0].checked=Object(c.d)(a.batchRecord.view),e.batchRecord[1].checked=Object(c.d)(a.batchRecord.batchOpen),e.shStockExchange.exportMonthReport=Object(c.d)(a.shStockExchange.exportMonthReport),e.shStockExchange.exportUser=Object(c.d)(a.shStockExchange.exportUser),e.shStockExchange.viewMonthReport=Object(c.d)(a.shStockExchange.viewMonthReport),e.shStockExchange.viewUser=Object(c.d)(a.shStockExchange.viewUser),e.szStockExchange.exportMonthReport=Object(c.d)(a.szStockExchange.exportMonthReport),e.szStockExchange.exportUser=Object(c.d)(a.szStockExchange.exportUser),e.szStockExchange.viewMonthReport=Object(c.d)(a.szStockExchange.viewMonthReport),e.szStockExchange.viewUser=Object(c.d)(a.szStockExchange.viewUser),e.appVersionManage.view=Object(c.d)(a.appVersionManage.view)}else e.$message({message:t.data.msg?t.data.msg:"获取权限失败",type:"error"})})).catch((function(t){e.$message({message:res.data.msg,type:"error"})}))},handleCheckAllChange:function(e){this.isIndeterminate=!1},save:function(){var e=this,t={roleId:this.$route.query.id,personalManage:{modifyPassword:this.updatepwd},roleManage:{add:this.roleManage[1].checked,delete:this.roleManage[3].checked,edit:this.roleManage[2].checked,managePermission:this.roleManage[4].checked,view:this.roleManage[0].checked},operatorManage:{add:this.operatorManage[1].checked,delete:this.operatorManage[3].checked,edit:this.operatorManage[2].checked,resetPassword:this.operatorManage[4].checked,view:this.operatorManage[0].checked},goodsManage:{add:this.goodsManage[1].checked,delete:this.goodsManage[3].checked,edit:this.goodsManage[2].checked,saleOnOrOff:this.goodsManage[4].checked,view:this.goodsManage[0].checked},activityManage:{add:this.activityManage[1].checked,delete:this.activityManage[3].checked,edit:this.activityManage[2].checked,saleOnOrOff:this.activityManage[4].checked,view:this.activityManage[0].checked},orderManage:{view:this.orderManage.view},userFeedbackManage:{view:this.userFeedbackManage.view},userManage:{view:this.userManage.view},batchRecord:{batchOpen:this.batchRecord[1].checked,view:this.batchRecord[0].checked},shStockExchange:{exportMonthReport:this.shStockExchange.exportMonthReport,exportUser:this.shStockExchange.exportUser,viewMonthReport:this.shStockExchange.viewMonthReport,viewUser:this.shStockExchange.viewUser},szStockExchange:{exportMonthReport:this.szStockExchange.exportMonthReport,exportUser:this.szStockExchange.exportUser,viewMonthReport:this.szStockExchange.viewMonthReport,viewUser:this.szStockExchange.viewUser},appVersionManage:{view:this.appVersionManage.view}};Object(o.o)(t).then((function(t){t.data.flag?e.$store.dispatch("user/GetRoles").then((function(){e.$message({message:"修改成功",type:"success"})})):e.$message({message:t.data.msg?t.data.msg:"修改失败",type:"error"})})).catch((function(t){e.$message({message:t,type:"error"})}))},back:function(){this.$router.go(-1)},handleChecked:function(e,t){var a=!1;switch(e){case"role":"view"==t.name&&0==t.checked&&(this.roleManage.some((function(e){if(e.checked)return a=!0,!0})),a&&(this.$message({message:"当其他权限开通时，查看权限为必须权限！",type:"error"}),this.roleManage[0].checked=!0)),"view"!=t.name&&t.checked&&(this.roleManage[0].checked=!0);break;case"operator":"view"==t.name&&0==t.checked&&(this.operatorManage.some((function(e){if(e.checked)return a=!0,!0})),a&&(this.$message({message:"当其他权限开通时，查看权限为必须权限！",type:"error"}),this.operatorManage[0].checked=!0)),"view"!=t.name&&t.checked&&(this.operatorManage[0].checked=!0);break;case"goods":"view"==t.name&&0==t.checked&&(this.goodsManage.some((function(e){if(e.checked)return a=!0,!0})),a&&(this.$message({message:"当其他权限开通时，查看权限为必须权限！",type:"error"}),this.goodsManage[0].checked=!0)),"view"!=t.name&&t.checked&&(this.goodsManage[0].checked=!0);break;case"activity":"view"==t.name&&0==t.checked&&(this.activityManage.some((function(e){if(e.checked)return a=!0,!0})),a&&(this.$message({message:"当其他权限开通时，查看权限为必须权限！",type:"error"}),this.activityManage[0].checked=!0)),"view"!=t.name&&t.checked&&(this.activityManage[0].checked=!0);break;case"batch":"view"==t.name&&0==t.checked&&(this.batchRecord.some((function(e){if(e.checked)return a=!0,!0})),a&&(this.$message({message:"当其他权限开通时，查看权限为必须权限！",type:"error"}),this.batchRecord[0].checked=!0)),"view"!=t.name&&t.checked&&(this.batchRecord[0].checked=!0)}}},created:function(){this.initdata()},computed:{adminInfo:function(){return this.$store.getters.adminInfo.username}}},s=(a(105),a(1)),i=Object(s.a)(r,n,[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("栏目")]),this._v(" "),t("th",[this._v("菜单")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("个人中心")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("角色管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("操作员管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("商品管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("活动管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("订单管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("用户意见反馈管理权限")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("用户Level2权限信息相关权限")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("批量记录相关权限")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("上交所相关权限")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("深交所相关权限")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",[this._v("APP版本管理权限")])])}],!1,null,"2ebd3025",null);i.options.__file="src/page/userManage/manageAuth.vue",t.default=i.exports},27:function(e,t){function a(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=a=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),a(t)}e.exports=a,e.exports.default=e.exports,e.exports.__esModule=!0},41:function(e,t,a){var n=a(106);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),(0,a(4).default)("73a05135",n,!1,{})},6:function(e,t,a){"use strict";a.d(t,"j",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"l",(function(){return i})),a.d(t,"i",(function(){return d})),a.d(t,"o",(function(){return h})),a.d(t,"h",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"g",(function(){return g})),a.d(t,"c",(function(){return v})),a.d(t,"n",(function(){return k})),a.d(t,"k",(function(){return m})),a.d(t,"m",(function(){return f}));var n=a(2);function c(e){return Object(n.a)({url:"/api/role/get/roles",method:"post",data:e})}function o(e){return Object(n.a)({url:"/api/role/add",method:"post",data:e})}function r(e){return Object(n.a)({url:"/api/role/update",method:"post",data:e})}function s(e){return Object(n.a)({url:"/api/role/delete",method:"get",params:e})}function i(e){return Object(n.a)({url:"/api/role/validate/name",method:"get",params:e})}function d(e){return Object(n.a)({url:"/api/role/get/permission",method:"get",params:e})}function h(e){return Object(n.a)({url:"/api/role/update/permission",method:"post",data:e})}function l(e){return Object(n.a)({url:"/api/user/get/operators",method:"post",data:e})}function u(e){return Object(n.a)({url:"/api/user/add/operator",method:"post",data:e})}function p(e){return Object(n.a)({url:"/api/user/update/operator",method:"post",data:e})}function g(e){return Object(n.a)({url:"/api/user/get/operator",method:"get",params:e})}function v(e){return Object(n.a)({url:"/api/user/delete/operator",method:"get",params:e})}function k(e){return Object(n.a)({url:"/api/user/reset/password",method:"get",params:e})}function m(e){return Object(n.a)({url:"/api/user/validate/email",method:"get",params:e})}function f(e){return Object(n.a)({url:"/api/user/validate/username",method:"get",params:e})}}}]);