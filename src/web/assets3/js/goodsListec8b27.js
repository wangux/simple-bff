(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{113:function(e,t,a){"use strict";a(45)},114:function(e,t,a){(t=a(3)(!1)).push([e.i,".goodsList_page[data-v-0988d90e]{padding:0 20px}.topmenu[data-v-0988d90e]{display:flex;justify-content:space-between;align-items:center;height:60px;padding:0 20px;margin:20px 0px 0px;border:1px solid #efefef}.topmenu .topmenu_r[data-v-0988d90e]{cursor:pointer}.topmenu .title[data-v-0988d90e]{color:#95b3ce;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.topmenu span.title[data-v-0988d90e]{margin-left:16px}.table[data-v-0988d90e]{overflow-x:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.table[data-v-0988d90e] ::-webkit-scrollbar{width:6px;height:6px}.table .btnbox[data-v-0988d90e]{display:flex;flex-direction:column}.table .btn[data-v-0988d90e]{display:inline-block;margin-left:20px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.table .auth.btn[data-v-0988d90e]{margin-left:0}.Pagination[data-v-0988d90e]{display:flex;justify-content:space-between;margin-top:8px}\n",""]),e.exports=t},219:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goodsList_page fillcontain"},[a("Toptitle",{attrs:{msg:e.msg}}),e._v(" "),a("div",{staticClass:"topmenu"},[e._m(0),e._v(" "),a("el-button",{staticClass:"topmenu_r",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addoperator}},[a("span",[e._v("商品添加")])])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{"element-loading-text":"拼命加载中",data:e.tableData,border:"","tooltip-effect":"dark","row-key":function(e){return e.index}}},[a("el-table-column",{attrs:{prop:"goodsID",fixed:"","min-width":"280",resizable:"",label:"商品编号","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName","min-width":"140",label:"商品名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建时间","min-width":"120",resizable:"","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsTime","min-width":"140",resizable:"",label:"商品有效时长","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"salesStatus",label:"商品状态","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"frozenCount",label:"冻结数量","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"store",label:"库存","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",label:"备注","min-width":"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"handle",fixed:"right",label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("div",{staticClass:"btn",on:{click:function(a){return e.toedit(t.row.id)}}},[a("i",{staticClass:"el-icon-edit"}),e._v(" "),a("span",[e._v("修改")])]),e._v(" "),a("div",{staticClass:"btn",on:{click:function(a){return e.toselectLog(t.row.id)}}},[a("i",{staticClass:"el-icon-date"}),e._v(" "),a("span",[e._v("查询日志")])])]),e._v(" "),a("div",[0==t.row.goodsState?a("div",{directives:[{name:"permission",rawName:"v-permission",value:{params:["goodsManage","saleOnOrOff"],do:e.toreset,query:{state:1,id:t.row.id}},expression:"{ params: ['goodsManage','saleOnOrOff'] , do: toreset , query: { state:1,id: scope.row.id } }"}],staticClass:"btn"},[a("i",{staticClass:"el-icon-refresh"}),e._v(" "),a("span",[e._v("上架")])]):a("div",{directives:[{name:"permission",rawName:"v-permission",value:{params:["goodsManage","saleOnOrOff"],do:e.toreset,query:{state:0,id:t.row.id}},expression:"{ params: ['goodsManage','saleOnOrOff'] , do: toreset , query: { state:0,id: scope.row.id } }"}],staticClass:"btn"},[a("i",{staticClass:"el-icon-refresh"}),e._v(" "),a("span",[e._v("下架")])]),e._v(" "),a("div",{directives:[{name:"permission",rawName:"v-permission",value:{params:["goodsManage","delete"],do:e.tocancle,query:{index:t.$index,id:t.row.id}},expression:"{ params: ['goodsManage','delete'] , do: tocancle , query: { index:scope.$index,id: scope.row.id } }"}],staticClass:"btn"},[a("i",{staticClass:"el-icon-circle-close"}),e._v(" "),a("span",[e._v("删除")])])])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[3,5,10,20],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)};s._withStripped=!0;var o=a(8),i={data:function(){return{msg:"4",adminInfo:"",loading:!0,currentPage:1,offset:1,limit:10,count:10,timeUnit:"商品有效时长",tableData:[]}},methods:{initdata:function(){var e={limit:this.limit,offset:this.offset};this.getListData(e)},getListData:function(e){var t=this;Object(o.e)(e).then((function(e){e.data.flag?(t.loading=!1,t.tableData=[],e.data.data.rows.forEach((function(e,a){var s={id:e.id,code:e.code,goodsID:e.code,goodsName:e.name,time:e.createTime,goodsTime:e.goodsTime,price:e.price,goodsState:e.salesStatus,salesStatus:e.salesStatus,frozenCount:e.freezeNumber,store:e.surplusNum,note:e.remark};switch(s.salesStatus){case 0:s.salesStatus="下架";break;case 1:s.salesStatus="上架"}switch(e.timeUnit){case"DAY":s.timeUnit="天";break;case"YEAR":s.timeUnit="年";break;case"MONTH":s.timeUnit="月"}s.goodsTime=s.goodsTime+s.timeUnit,t.tableData.push(s)})),t.count=e.data.data.total):(t.loading=!1,t.$message({message:e.data.msg,type:"error"}))})).catch((function(e){t.loading=!1,t.$message({message:e,type:"error"})}))},addoperator:function(){this.$router.push("/goodsManage/addGoods")},toedit:function(e){this.$router.push({path:"/goodsManage/editGoods",query:{id:e}})},tocancle:function(e){var t=this;window.confirm("请确定是否删除")&&Object(o.a)({id:e.id}).then((function(a){a.data.flag?(t.$message({message:"删除成功",type:"success"}),t.tableData.splice(e.index,1)):t.$message({message:a.data.msg?a.data.msg:"删除失败",type:"error"})})).catch((function(e){t.$message({message:e,type:"error"})}))},toselectLog:function(e){this.$router.push({path:"/goodsManage/selectlog",query:{code:e}})},toreset:function(e){var t=this;if(1==e.state)var a=window.confirm("请确定是否上架");else a=window.confirm("请确定是否下架");if(a){var s={id:e.id,salesStatus:e.state};Object(o.g)(s).then((function(a){a.data.flag?1==e.state?(t.$message({message:"上架成功",type:"success"}),t.$router.go(0)):(t.$message({message:"下架成功",type:"success"}),t.$router.go(0)):t.$message({message:a.data.msg?a.data.msg:"操作失败",type:"error"})})).catch((function(e){t.$message({message:e,type:"error"})}))}},handleSizeChange:function(e){this.loading=!0,this.limit=e;var t={limit:this.limit,offset:this.offset};this.getListData(t)},handleCurrentChange:function(e){this.loading=!0,this.currentPage=e;var t={limit:this.limit,offset:e};this.getListData(t)}},created:function(){this.initdata()},components:{Toptitle:a(5).a}},n=(a(113),a(1)),r=Object(n.a)(i,s,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"topmenu_l"},[t("i",{staticClass:"el-icon-document title"}),this._v(" "),t("span",{staticClass:"title"},[this._v("商品列表")])])}],!1,null,"0988d90e",null);r.options.__file="src/page/goodsManage/goodsList.vue",t.default=r.exports},31:function(e,t,a){var s=a(84);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals),(0,a(4).default)("5207a714",s,!1,{})},45:function(e,t,a){var s=a(114);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals),(0,a(4).default)("087277f8",s,!1,{})},5:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header_container"},["1"==e.msg?a("i",{staticClass:"el-icon-circle-plus-outline title"}):e._e(),e._v(" "),"2"==e.msg?a("i",{staticClass:"el-icon-edit-outline title"}):e._e(),e._v(" "),"3"==e.msg?a("i",{staticClass:"el-icon-user title"}):e._e(),e._v(" "),"4"==e.msg?a("i",{staticClass:"el-icon-setting title"}):e._e(),e._v(" "),"5"==e.msg?a("i",{staticClass:"el-icon-search title"}):e._e(),e._v(" "),"6"==e.msg?a("i",{staticClass:"el-icon-document-add title"}):e._e(),e._v(" "),e._l(e.$route.meta.title,(function(t,s){return a("span",{key:s,staticClass:"title"},[e._v(e._s(t))])}))],2)};s._withStripped=!0;var o=(a(83),a(1)),i=Object(o.a)({data:function(){return{showicon:!0}},props:["msg"],methods:{init:function(){}},created:function(){}},s,[],!1,null,"4af4cfe4",null);i.options.__file="src/component/toptitle.vue",t.a=i.exports},8:function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return u}));var s=a(2);function o(e){return Object(s.a)({url:"/api/goods/get/goods",method:"post",data:e})}function i(e){return Object(s.a)({url:"/api/goods/add",method:"post",data:e})}function n(e){return Object(s.a)({url:"/api/goods/update",method:"post",data:e})}function r(e){return Object(s.a)({url:"/api/goods/delete",method:"get",params:e})}function l(e){return Object(s.a)({url:"/api/goods/upDown",method:"post",params:e})}function c(e){return Object(s.a)({url:"/api/goods/get/goodsLogs",method:"post",data:e})}function d(e){return Object(s.a)({url:"/api/goods/checkGoodsName",method:"get",params:e})}function u(e){return Object(s.a)({url:"/api/goods/getGoodsById",method:"get",params:e})}},83:function(e,t,a){"use strict";a(31)},84:function(e,t,a){(t=a(3)(!1)).push([e.i,".header_container[data-v-4af4cfe4]{width:100%;background-color:#fff;height:60px;display:flex;justify-content:flex-start;align-items:center;box-sizing:border-box}.header_container img[data-v-4af4cfe4]{height:60px;width:auto}.header_container .title[data-v-4af4cfe4]{color:#acacac;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.header_container span.title[data-v-4af4cfe4]{margin-left:16px}\n",""]),e.exports=t}}]);