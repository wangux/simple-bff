(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{0:function(e,t,n){"use strict";function a(e){return e||""}function r(e){return e||!1}function o(e){for(var t in e)""===e[t]&&delete e[t];return e}function s(e){for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)+e.charCodeAt(n-1));return escape(t)}function i(e){e=unescape(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-t.charCodeAt(n-1));return t}function l(e){if(!t)var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function c(e){if(!t)var t=new Date(e);return t.getFullYear()+""+(t.getMonth()+1)}function u(e){var t=this,n=!1;if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=e.headers["content-type"]&&"application/vnd.ms-excel"!=e.headers["content-type"]||(n=!0),n){var a=new Blob([e.data],{type:"application/vnd.ms-excel"}),r=e.headers["content-disposition"].split(";")[1].split("=")[1];if("download"in document.createElement("a")){var o=document.createElement("a");o.style.display="none",o.href=window.URL.createObjectURL(a),o.download=decodeURIComponent(r),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(a,r)}else{var s=new FileReader;s.onload=function(e){return t.$message.error(JSON.parse(e.target.result).msg)},s.readAsText(e.data)}}function p(e,t,n){var a;return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=this;if(a&&clearTimeout(a),n){var l=!a;a=setTimeout((function(){a=null}),t),l&&e.apply(i,o)}else a=setTimeout((function(){e.apply(i,o)}),t)}}n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"i",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return p})),n(27)},139:function(e,t,n){"use strict";n(58)},140:function(e,t,n){(t=n(3)(!1)).push([e.i,".shStockMonth_page[data-v-66261afe]{padding:0 20px}.topmenu[data-v-66261afe]{display:flex;justify-content:space-between;align-items:center;height:60px;padding:0 20px;margin:20px 0px 0px;border:1px solid #efefef}.topmenu .title[data-v-66261afe]{color:#95b3ce;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.topmenu .topmenu_r[data-v-66261afe]{margin-right:12px;cursor:pointer}.topmenu span.title[data-v-66261afe]{margin-left:16px}.table[data-v-66261afe]{overflow-x:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.table[data-v-66261afe] ::-webkit-scrollbar{width:5px;height:5px}.table .btn[data-v-66261afe]{display:inline-block;margin-left:20px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.table .auth.btn[data-v-66261afe]{margin-left:0}.Pagination[data-v-66261afe]{display:flex;justify-content:space-between;margin-top:8px}\n",""]),e.exports=t},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=n(2);function r(e){return Object(a.a)({url:"/api/level2/report/query/users",method:"post",data:e})}function o(e){return Object(a.a)({url:"/api/level2/report/query",method:"post",data:e})}function s(e){return Object(a.a)({url:"/api/level2/report/export",method:"get",responseType:"blob",params:e})}},206:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shStockMonth_page fillcontain"},[n("div",{staticClass:"topmenu"},[e._m(0),e._v(" "),n("div",{directives:[{name:"permission",rawName:"v-permission",value:{params:["shStockExchange","exportMonthReport"],do:e.exportReport},expression:"{ params: ['shStockExchange','exportMonthReport'] , do: exportReport }"}],staticClass:"topmenu_r"},[n("i",{staticClass:"el-icon-download title"}),e._v(" "),n("span",{staticClass:"title"},[e._v("导出报表")])])]),e._v(" "),n("div",{staticClass:"table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:e.tableData,border:"","select-on-indeterminate":!1},on:{select:e.select,"select-all":e.handleSelectAll,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),n("el-table-column",{attrs:{prop:"reportTime",label:"报告期","min-width":"40"}}),e._v(" "),n("el-table-column",{attrs:{prop:"fullpriceUser",label:"当月全价用户数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"regulatoryUser",label:"当月监管用户数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"freeUser",label:"当月内部免费用户数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"trialUser",label:"当月试用用户数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"newClient",label:"当月新开通客户数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"logoutClient",label:"当月注销客户数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"totalCost",label:"当月应付使用费总计(元)","min-width":"120"}})],1)],1),e._v(" "),n("div",{staticClass:"Pagination"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[3,5,10,20],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])};a._withStripped=!0;var r=n(15),o=n(0),s={data:function(){return{msg:"4",adminInfo:"",loading:!0,currentPage:1,offset:0,limit:10,count:10,multipleSelection:[],tableData:[]}},methods:{init:function(){var e=this.setParams();this.queryMonthReport(e)},setParams:function(){return{offset:this.offset,limit:this.limit}},queryMonthReport:function(e){var t=this;Object(r.b)(Object(o.h)(e)).then((function(e){e.data.flag?(t.loading=!1,t.tableData=[],e.data.data.rows.forEach((function(e,n){var a={reportTime:e.month,fullpriceUser:e.ordinaryUserNum,regulatoryUser:e.supervisionUserNum,freeUser:e.freeUserNum,trialUser:e.trialUserNum,newClient:e.newUserNum,logoutClient:e.expiredUserNum,totalCost:e.totalCost};t.tableData.push(a)})),t.count=e.data.data.total):(t.loading=!1,t.$message({message:e.data.msg?e.data.msg:"查询报表失败",type:"error"}))})).catch((function(e){t.loading=!1,t.$message({message:e,type:"error"})}))},exportReport:function(){var e=this;if(this.multipleSelection.length>0){var t={month:this.multipleSelection[0].reportTime};Object(r.a)(t).then((function(t){t?(Object(o.b)(t),e.$message({message:"导出报表成功",type:"success"})):e.$message({message:t.data.msg?t.data.msg:"导出报表失败",type:"error"})})).catch((function(t){e.$message({message:t,type:"error"})}))}else this.$message({message:"请先选中要导出哪个月份报表",type:"error"})},handleSizeChange:function(e){this.loading=!0,this.limit=e;var t=this.setParams();this.queryMonthReport(t)},handleCurrentChange:function(e){this.loading=!0,this.currentPage=e,this.offset=e;var t=this.setParams();this.queryMonthReport(t)},handleSelectionChange:function(e){this.multipleSelection=e},select:function(e,t){this.$refs.multipleTable.clearSelection(),0!==e.length&&this.$refs.multipleTable.toggleRowSelection(t,!0)},handleSelectAll:function(e){this.$refs.multipleTable.clearSelection()}},created:function(){this.init()}},i=(n(139),n(1)),l=Object(i.a)(s,a,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"topmenu_l"},[t("i",{staticClass:"el-icon-document title"}),this._v(" "),t("span",{staticClass:"title"},[this._v("购买用户数月报表")])])}],!1,null,"66261afe",null);l.options.__file="src/page/reportCenter/shStockMonth.vue",t.default=l.exports},27:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},58:function(e,t,n){var a=n(140);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,n(4).default)("927ab50c",a,!1,{})}}]);